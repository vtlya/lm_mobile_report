
<!DOCTYPE html>
<html>

 <head>
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Roboto', sans-serif;
        font-size: 5%px;
    }
      a {
        text-decoration: none;
        background: #F2F2F2;
      color: #04B404;
      padding: 2px;
      border: 1px solid gray;
      border-radius: 7px 
      }
     a:hover {
    color: #0B610B;
    background: #D8D8D8; 
   } 
   select {
        text-decoration: none;
        background: #F2F2F2;
      color: #04B404;
      padding: 2px;
      border: 1px solid gray;
      border-radius: 7px 
      }
     select :hover {
    color: #0B610B;
    background: #D8D8D8; 
   } 
   input{
  border-radius: 7px;
  padding: 2px;
  margin: 3px;
  border: 1px solid gray;
   } 
    </style>
    МОЙ МАГАЗИН. ДЕНЬ МОБИЛЬНОСТИ ADEO - КВЕСТЫ. <a href="https://vtlya.github.io/lm_mobile_report/itogi"> СМОТРЕТЬ СМОТРЕТЬ ИТОГИ </a>
    <div align="right"> ВВЕДИТЕ НОМЕР СВОЕГО МАГАЗИНА:
  <form name="idform" style="display: inline-block">
    <input type="text" size="20" name="store" maxlength="3" onkeypress="return (function() {
  document.querySelector('input').addEventListener('keydown', function(e) {
    if (e.keyCode === 13) {
      // можете делать все что угодно со значением текстового поля
      location.href='https://vtlya.github.io/lm_mobile_report/mystore?store='+escape(document.forms['idform'].elements['store'].value)
    }
  });
})();">
  <a type="button" onclick="location.href='https://vtlya.github.io/lm_mobile_report/mystore?store='+escape(document.forms['idform'].elements['store'].value)">СМОТРЕТЬ ТОЛЬКО МОЙ МАГАЗИН</a>
    </form>
    </div>
  </head>

<body>
<script>
setTimeout(function(){
    location.reload();
}, 500000);
</script>

<script type="text/javascript">
function getAllUrlParams(url) {

  // извлекаем строку из URL или объекта window
  var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

  // объект для хранения параметров
  var obj = {};

  // если есть строка запроса
  if (queryString) {

    // данные после знака # будут опущены
    queryString = queryString.split('#')[0];

    // разделяем параметры
    var arr = queryString.split('&');

    for (var i=0; i<arr.length; i++) {
      // разделяем параметр на ключ => значение
      var a = arr[i].split('=');

      // обработка данных вида: list[]=thing1&list[]=thing2
      var paramNum = undefined;
      var paramName = a[0].replace(/\[\d*\]/, function(v) {
        paramNum = v.slice(1,-1);
        return '';
      });

      // передача значения параметра ('true' если значение не задано)
      var paramValue = typeof(a[1])==='undefined' ? true : a[1];

      // преобразование регистра
      paramName = paramName.toLowerCase();
      paramValue = paramValue.toLowerCase();

      // если ключ параметра уже задан
      if (obj[paramName]) {
        // преобразуем текущее значение в массив
        if (typeof obj[paramName] === 'string') {
          obj[paramName] = [obj[paramName]];
        }
        // если не задан индекс...
        if (typeof paramNum === 'undefined') {
          // помещаем значение в конец массива
          obj[paramName].push(paramValue);
        }
        // если индекс задан...
        else {
          // размещаем элемент по заданному индексу
          obj[paramName][paramNum] = paramValue;
        }
      }
      // если параметр не задан, делаем это вручную
      else {
        obj[paramName] = paramValue;
      }
    }
  }

  return obj;
}

var store = getAllUrlParams().store;
document.body.innerHTML += '<iframe id ="frame" src="https://datastudio.google.com/embed/u/0/reporting/54e1d8a0-b556-4c14-88e9-bc0d2fd07238/page/9eKCB?params=%7B%22df48%22:%22include%25EE%2580%25801%25EE%2580%2580IN%25EE%2580%2580' + store + '%22%7D" style="position:fixed; top:100; left:0; bottom:0; right:0; width:99%; height:94.5%; border:none; margin:15; padding:15; overflow:hidden; z-index:999999;" allowfullscreen> </iframe>';
</script>

</body>
</html>

